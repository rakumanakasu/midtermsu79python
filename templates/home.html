{% extends "master.html" %}
{% block main_content %}

{% if error %}
<div class="alert alert-danger text-center my-3">
  {{ error }}
</div>
{% endif %}

<!-- HERO SCROLLING SECTION (kept as you have it) -->
<div id="heroCarousel" class="carousel slide mb-5 shadow-lg rounded overflow-hidden" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
     <img src="/static/img/yn_bn.png" class="d-block w-100" alt="Hero 1" style="height: 450px; object-fit: cover;">

    </div>
    <div class="carousel-item">
      <img src="/static/hero/hero2.jpg" class="d-block w-100" alt="Hero 2" style="height: 450px; object-fit: cover;">
      <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
        <h2 class="fw-bold">Trendy & Stylish</h2>
        <p>Upgrade your lifestyle with our curated collection</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="/static/hero/hero3.jpg" class="d-block w-100" alt="Hero 3" style="height: 450px; object-fit: cover;">
      <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
        <h2 class="fw-bold">Special Offers</h2>
        <p>Save big on limited-time deals</p>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- PRODUCTS SECTION -->
<div id="products" class="container-fluid px-4">
  <div class="d-flex align-items-center justify-content-between mb-5">
    <h2 class="fw-bold text-primary">Our Products</h2>
    <div class="d-flex gap-2">
      <input type="text" class="form-control form-control-sm" placeholder="Searchâ€¦" v-model="searchQuery" style="max-width: 200px;">
      <select class="form-select form-select-sm" v-model="selectedCategory" style="max-width: 180px;">
        <option value="">All Categories</option>
        <option v-for="cat in categories" :key="cat" :value="cat">[[ cat ]]</option>
      </select>
    </div>
  </div>

  <!-- Card Grid -->
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-5">
    <div class="col" v-for="item in products" :key="item.id">
      <div class="card h-100 border-0 shadow-sm rounded-4 p-2">
        <span class="badge position-absolute m-3" style="background: linear-gradient(135deg, #4cc9f0, #4361ee);">
          [[ item.category ]]
        </span>
        <img :src="'/static/uploads/' + item.image" class="card-img-top p-4" :alt="item.name" style="height: 230px; object-fit: contain;">
        <div class="card-body d-flex flex-column px-3 pb-3">
          <h5 class="card-title text-dark fw-semibold mb-3">[[ item.name ]]</h5>
          <a :href="'/detail/' + item.id" class="small text-decoration-underline link-primary mb-4">See details</a>
          <div class="mt-auto d-flex justify-content-between align-items-center">
            <span class="badge rounded-pill bg-danger fs-6 px-3 py-2">$[[ item.price ]]</span>
            <button @click="addToCart(item)" class="btn btn-sm btn-success rounded-pill px-3 py-2">
              <i class="bi bi-cart-plus me-1"></i> Add
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div v-if="products && products.length === 0" class="text-center py-5">
    <h4 class="text-muted">No products found</h4>
    <p class="text-secondary">Try adjusting your filters or search.</p>
    <button class="btn btn-outline-secondary btn-sm" @click="resetFilters">Reset filters</button>
  </div>
</div>

{% endblock %}

<!-- Extra spacing tweaks -->
<style>
  #products {
    padding-top: 2rem;
    padding-bottom: 3rem;
  }
  .card {
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }
  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 .75rem 1.5rem rgba(0,0,0,.1);
  }
</style>

